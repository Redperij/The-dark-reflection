# Adding tags to culture groups - edit the following in common/scripted_triggers/EAW_race_triggers.txt:
#    - is_country_main_culture_CULTURE
#    - is_state_main_culture_CULTURE
#    - is_operative_main_culture_CULTURE
# Adding a new culture group - ask Yard. In case I die/become unresponsive, you'll need to:
# 1. In common/scripted_triggers/EAW_race_triggers.txt:
#    a) Add new main_culture triggers as above
#    b) Add a is_country_secondary_culture_CULTURE trigger
# 3. In common/scripted_effects/EAW_race_effects.txt:
#    a) operative_add_nationalities_CULTURE (look at existing ones for guidiance, add a new cultures index)
#    b) add an entry in operative_add_main_nationalities_from_PREV
#    c) add an entry in operative_add_secondary_nationalities_from_PREV
#    d) add an entry in operative_add_starting_nationalities_and_race
#    e) depending on tag, add an entry in operative_add_secondary_nationalities and operative_handle_secondary_cultures_races

operative_add_nationalities_changeling = {
	for_each_loop = {
		array = global.countries
		if = {
			limit = {
				var:v = { is_country_main_culture_changeling = yes }
			}
			add_nationality = var:v
		}
	}
	add_to_array = {
		cultures = 1
	}
}

operative_add_nationalities_olenian = {
	for_each_loop = {
		array = global.countries
		if = {
			limit = {
				var:v = { is_country_main_culture_olenian = yes }
			}
			add_nationality = var:v
		}
	}
	add_to_array = {
		cultures = 2
	}
}

operative_add_nationalities_diamond_dog = {
	for_each_loop = {
		array = global.countries
		if = {
			limit = {
				var:v = { is_country_main_culture_diamond_dog = yes }
			}
			add_nationality = var:v
		}
	}
	add_to_array = {
		cultures = 4
	}
}

operative_add_nationalities_dragon = {
	for_each_loop = {
		array = global.countries
		if = {
			limit = {
				var:v = { is_country_main_culture_dragon = yes }
			}
			add_nationality = var:v
		}
	}
	add_to_array = {
		cultures = 5
	}
}

operative_add_nationalities_bear = {
	for_each_loop = {
		array = global.countries
		if = {
			limit = {
				var:v = { is_country_main_culture_bear = yes }
			}
			add_nationality = var:v
		}
	}
	add_to_array = {
		cultures = 6
	}
}

operative_add_nationalities_buffalo = {
	for_each_loop = {
		array = global.countries
		if = {
			limit = {
				var:v = { is_country_main_culture_buffalo = yes }
			}
			add_nationality = var:v
		}
	}
	add_to_array = {
		cultures = 7
	}
}

operative_add_nationalities_aquileian = {
	for_each_loop = {
		array = global.countries
		if = {
			limit = {
				var:v = { is_country_main_culture_aquileian = yes }
			}
			add_nationality = var:v
		}
	}
	add_to_array = {
		cultures = 8
	}
}

operative_add_nationalities_equestrian = {
	for_each_loop = {
		array = global.countries
		if = {
			limit = {
				var:v = { is_country_main_culture_equestrian = yes }
			}
			add_nationality = var:v
		}
	}
	add_to_array = {
		cultures = 9
	}
}

operative_add_nationalities_herzlander = {
	for_each_loop = {
		array = global.countries
		if = {
			limit = {
				var:v = { is_country_main_culture_herzlander = yes }
			}
			add_nationality = var:v
		}
	}
	add_to_array = {
		cultures = 11
	}
}

operative_add_nationalities_northerner = {
	for_each_loop = {
		array = global.countries
		if = {
			limit = {
				var:v = { is_country_main_culture_northerner = yes }
			}
			add_nationality = var:v
		}
	}
	add_to_array = {
		cultures = 13
	}
}

operative_add_nationalities_penguin = {
	for_each_loop = {
		array = global.countries
		if = {
			limit = {
				var:v = { is_country_main_culture_penguin = yes }
			}
			add_nationality = var:v
		}
	}
	add_to_array = {
		cultures = 14
	}
}

operative_add_nationalities_southerner = {
	for_each_loop = {
		array = global.countries
		if = {
			limit = {
				var:v = { is_country_main_culture_southerner = yes }
			}
			add_nationality = var:v
		}
	}
	add_to_array = {
		cultures = 16
	}
}

operative_add_nationalities_undead = {
	for_each_loop = {
		array = global.countries
		if = {
			limit = {
				var:v = { is_country_main_culture_undead = yes }
			}
			add_nationality = var:v
		}
	}
	add_to_array = {
		cultures = 17
	}
}

operative_add_nationalities_yak = {
	for_each_loop = {
		array = global.countries
		if = {
			limit = {
				var:v = { is_country_main_culture_yak = yes }
			}
			add_nationality = var:v
		}
	}
	add_to_array = {
		cultures = 18
	}
}

operative_add_main_nationalities_from_PREV = {
	if = {
		limit = {
			OR = {
				has_trait = pony_race_trait
				has_trait = thestral_race_trait
			}
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_main_culture_equestrian = yes

					}
				}
			}
			operative_add_nationalities_equestrian = yes
		}
	}
	else_if = {
		limit = {
			has_trait = penguin_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_main_culture_penguin = yes

					}
				}
			}
			operative_add_nationalities_penguin = yes
		}
	}
	else_if = {
		limit = {
			has_trait = bear_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_main_culture_bear = yes

					}
				}
			}
			operative_add_nationalities_bear = yes
		}
	}
	else_if = {
		limit = {
			has_trait = changeling_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_main_culture_changeling = yes

					}
				}
			}
			operative_add_nationalities_changeling = yes
		}
	}
	else_if = {
		limit = {
			has_trait = griffon_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_main_culture_aquileian = yes

					}
				}
			}
			operative_add_nationalities_aquileian = yes
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_main_culture_herzlander = yes

					}
				}
			}
			operative_add_nationalities_herzlander = yes
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_main_culture_northerner = yes

					}
				}
			}
			operative_add_nationalities_northerner = yes
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_main_culture_southerner = yes

					}
				}
			}
			operative_add_nationalities_southerner = yes
		}
	}
	else_if = {
		limit = {
			has_trait = yak_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_main_culture_yak = yes

					}
				}
			}
			operative_add_nationalities_yak = yes
		}
	}
	else_if = {
		limit = {
			has_trait = deer_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_main_culture_olenian = yes

					}
				}
			}
			operative_add_nationalities_olenian = yes
		}
	}
	else_if = {
		limit = {
			has_trait = diamond_dog_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_main_culture_diamond_dog = yes

					}
				}
			}
			operative_add_nationalities_diamond_dog = yes
		}
	}
	else_if = {
		limit = {
			has_trait = undead_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_main_culture_undead = yes

					}
				}
			}
			operative_add_nationalities_undead = yes
		}
	}
	else_if = {
		limit = {
			has_trait = buffalo_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_main_culture_buffalo = yes

					}
				}
			}
			operative_add_nationalities_buffalo = yes
		}
	}
	else_if = {
		limit = {
			has_trait = dragon_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_main_culture_dragon = yes

					}
				}
			}
			operative_add_nationalities_dragon = yes
		}
	}
}

operative_add_secondary_nationalities_from_PREV = {
	if = {
		limit = {
			OR = {
				has_trait = pony_race_trait
				has_trait = thestral_race_trait
			}
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_secondary_culture_equestrian = yes

					}
				}
			}
			operative_add_nationalities_equestrian = yes
		}
	}
	else_if = {
		limit = {
			has_trait = penguin_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_secondary_culture_penguin = yes

					}
				}
			}
			operative_add_nationalities_penguin = yes
		}
	}
	else_if = {
		limit = {
			has_trait = bear_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_secondary_culture_bear = yes

					}
				}
			}
			operative_add_nationalities_bear = yes
		}
	}
	else_if = {
		limit = {
			has_trait = changeling_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_secondary_culture_changeling = yes

					}
				}
			}
			operative_add_nationalities_changeling = yes
		}
	}
	else_if = {
		limit = {
			has_trait = griffon_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_secondary_culture_aquileian = yes

					}
				}
			}
			operative_add_nationalities_aquileian = yes
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_secondary_culture_herzlander = yes

					}
				}
			}
			operative_add_nationalities_herzlander = yes
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_secondary_culture_northerner = yes

					}
				}
			}
			operative_add_nationalities_northerner = yes
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_secondary_culture_southerner = yes

					}
				}
			}
			operative_add_nationalities_southerner = yes
		}
	}
	else_if = {
		limit = {
			has_trait = yak_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_secondary_culture_yak = yes

					}
				}
			}
			operative_add_nationalities_yak = yes
		}
	}
	else_if = {
		limit = {
			has_trait = deer_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_secondary_culture_olenian = yes

					}
				}
			}
			operative_add_nationalities_olenian = yes
		}
	}
	else_if = {
		limit = {
			has_trait = diamond_dog_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_secondary_culture_diamond_dog = yes

					}
				}
			}
			operative_add_nationalities_diamond_dog = yes
		}
	}
	else_if = {
		limit = {
			has_trait = undead_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_secondary_culture_undead = yes

					}
				}
			}
			operative_add_nationalities_undead = yes
		}
	}
	else_if = {
		limit = {
			has_trait = buffalo_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_secondary_culture_buffalo = yes

					}
				}
			}
			operative_add_nationalities_buffalo = yes
		}
	}
	else_if = {
		limit = {
			has_trait = dragon_race_trait
		}
		if = {
			limit = {
				PREV = {
					OR = {
						is_country_secondary_culture_dragon = yes

					}
				}
			}
			operative_add_nationalities_dragon = yes
		}
	}
}

operative_add_secondary_nationalities = {
	if = {
		limit = {
			OR = {
				has_nationality = EQS
				has_nationality = WES
				has_nationality = WHN
			}
		}
		add_nationality = EQS
		add_nationality = WES
		add_nationality = WHN
	}
}

operative_handle_secondary_cultures_races = {
	if = {
		limit = {
			has_unit_leader_race_trait = no
		}

		if = {
			limit = { 
				has_unit_leader_race_trait = no
				FROM = {
					OR = {
						is_country_main_culture_herzlander = yes
						is_country_main_culture_southerner = yes
						is_country_main_culture_northerner = yes
						is_country_main_culture_aquileian = yes
					}
				}
			}
			add_unit_leader_trait = griffon_race_trait
		}
	}
}

operative_add_starting_nationalities_and_race = {
	if = {
		limit = { has_unit_leader_race_trait = no }
		if = {
			limit = {
				is_operative_main_culture_equestrian = yes
			}
			add_unit_leader_trait = pony_race_trait
			operative_bat_chance = yes
			operative_add_nationalities_equestrian = yes
		}
		else_if = {
			limit = {
				is_operative_main_culture_changeling = yes
			}
			add_unit_leader_trait = changeling_race_trait
			operative_add_nationalities_changeling = yes
		}
		else_if = {
			limit = {
				is_operative_main_culture_olenian = yes
			}
			add_unit_leader_trait = deer_race_trait
			operative_add_nationalities_olenian = yes
		}
		else_if = {
			limit = {
				is_operative_main_culture_diamond_dog = yes
			}
			add_unit_leader_trait = diamond_dog_race_trait
			operative_add_nationalities_diamond_dog = yes
		}
		else_if = {
			limit = {
				is_operative_main_culture_dragon = yes
			}
			add_unit_leader_trait = dragon_race_trait
			operative_add_nationalities_dragon = yes
		}
		else_if = {
			limit = {
				is_operative_main_culture_bear = yes
			}
			add_unit_leader_trait = bear_race_trait
			operative_add_nationalities_bear = yes
		}
		else_if = {
			limit = {
				is_operative_main_culture_buffalo = yes
			}
			add_unit_leader_trait = buffalo_race_trait
			operative_add_nationalities_buffalo = yes
		}
		else_if = {
			limit = {
				is_operative_main_culture_aquileian = yes
			}
			add_unit_leader_trait = griffon_race_trait
			operative_add_nationalities_aquileian = yes
		}
		else_if = {
			limit = {
				is_operative_main_culture_herzlander = yes
			}
			add_unit_leader_trait = griffon_race_trait
			operative_add_nationalities_herzlander = yes
		}
		else_if = {
			limit = {
				is_operative_main_culture_northerner = yes
			}
			add_unit_leader_trait = griffon_race_trait
			operative_add_nationalities_northerner = yes
		}
		else_if = {
			limit = {
				is_operative_main_culture_penguin = yes
			}
			add_unit_leader_trait = penguin_race_trait
			operative_add_nationalities_penguin = yes
		}
		else_if = {
			limit = {
				is_operative_main_culture_southerner = yes
			}
			add_unit_leader_trait = griffon_race_trait
			operative_add_nationalities_southerner = yes
		}
		else_if = {
			limit = {
				is_operative_main_culture_yak = yes
			}
			add_unit_leader_trait = yak_race_trait
			operative_add_nationalities_yak = yes
		}
	}
}

set_operative_to_griffon = {
	if = {
		limit = {
			is_female = yes
		}
		set_temp_variable = {
			name_idx = 3
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_portrait = "[PORTRAIT]"
			}
			PORTRAIT = "[?name_idx.Get_griffon_operative_female_portrait]"
		}
	}
	else = {
		set_temp_variable = {
			name_idx = 7
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_portrait = "[PORTRAIT]"
			}
			PORTRAIT = "[?name_idx.Get_griffon_operative_male_portrait]"
		}
	}
	add_unit_leader_trait = griffon_race_trait
}

set_operative_to_herzlander = {
	set_operative_to_griffon = yes
	if = {
		limit = {
			is_female = yes
		}
		set_temp_variable = {
			name_idx = 47
		}
		get_random_name_idx = yes
		set_temp_variable = {
			surname_idx = 30
		}
		get_random_surname_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetHerzlanderFemaleName]"
			SURNAME = "[?surname_idx.GetHerzlanderSurname]"
		}
	}
	else = {
		set_temp_variable = {
			name_idx = 56
		}
		get_random_name_idx = yes
		set_temp_variable = {
			surname_idx = 30
		}
		get_random_surname_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetHerzlanderMaleName]"
			SURNAME = "[?surname_idx.GetHerzlanderSurname]"
		}
	}
	operative_add_nationalities_herzlander = yes
}

set_operative_to_pony = {
	if = {
		limit = {
			is_female = yes
		}
		set_temp_variable = {
			name_idx = 11
		}
		get_random_name_idx = yes
		set_temp_variable = {
			surname_idx = 20
		}
		get_random_surname_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetPonyFemaleName]"
			SURNAME = "[?surname_idx.GetPonySurname]"
		}
		set_temp_variable = {
			name_idx = 3
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_portrait = "[PORTRAIT]"
			}
			PORTRAIT = "[?name_idx.Get_pony_operative_female_portrait]"
		}
	}
	else = {
		set_temp_variable = {
			name_idx = 16
		}
		get_random_name_idx = yes
		set_temp_variable = {
			surname_idx = 20
		}
		get_random_surname_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetPonyMaleName]"
			SURNAME = "[?surname_idx.GetPonySurname]"
		}
		set_temp_variable = {
			name_idx = 5
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_portrait = "[PORTRAIT]"
			}
			PORTRAIT = "[?name_idx.Get_pony_operative_male_portrait]"
		}
	}
	add_unit_leader_trait = pony_race_trait
}

operative_bat_chance = {
	random_list = {
		50 = {

		}
		50 = {
			set_operative_from_pony_to_bat = yes
		}
	}
}

set_operative_from_pony_to_bat = {
	if = {
		limit = {
			is_female = no
		}
		remove_unit_leader_trait = pony_race_trait
		set_temp_variable = {
			name_idx = 2
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_portrait = "[PORTRAIT]"
			}
			PORTRAIT = "[?name_idx.Get_bat_operative_male_portrait]"
		}
		add_unit_leader_trait = thestral_race_trait
	}
}

set_operative_to_equestrian = {
	set_operative_to_pony = yes
	operative_add_nationalities_equestrian = yes
}

set_operative_to_diamond_dog = {
	if = {
		limit = {
			is_female = yes
		}
		set_temp_variable = {
			name_idx = 8
		}
		get_random_name_idx = yes
		set_temp_variable = {
			surname_idx = 24
		}
		get_random_surname_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetDiamondDogFemaleName]"
			SURNAME = "[?surname_idx.GetDiamondDogSurname]"
		}
		set_leader_portrait = "GFX_portrait_dog_generic_8"
	}
	else = {
		set_temp_variable = {
			name_idx = 39
		}
		get_random_name_idx = yes
		set_temp_variable = {
			surname_idx = 24
		}
		get_random_surname_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetDiamondDogMaleName]"
			SURNAME = "[?surname_idx.GetDiamondDogSurname]"
		}
		set_temp_variable = {
			name_idx = 11
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_portrait = "[PORTRAIT]"
			}
			PORTRAIT = "[?name_idx.Get_DMT_operative_male_portrait]"
		}
	}
	add_unit_leader_trait = diamond_dog_race_trait
	operative_add_nationalities_diamond_dog = yes
}

set_unit_leader_to_herzlander = {
	if = {
		limit = {
			is_female = yes
		}
		set_temp_variable = {
			name_idx = 47
		}
		get_random_name_idx = yes
		set_temp_variable = {
			surname_idx = 30
		}
		get_random_surname_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetHerzlanderFemaleName]"
			SURNAME = "[?surname_idx.GetHerzlanderSurname]"
		}
		if = {
			limit = {
				is_navy_leader = yes
			}
			set_temp_variable = {
				name_idx = 2
			}
			get_random_name_idx = yes
			meta_effect = {
				text = {
					set_leader_portrait = "[PORTRAIT]"
				}
				PORTRAIT = "[?name_idx.Get_griffon_navy_female_portrait]"
			}
		}
		else = {
			set_temp_variable = {
				name_idx = 2
			}
			get_random_name_idx = yes
			meta_effect = {
				text = {
					set_leader_portrait = "[PORTRAIT]"
				}
				PORTRAIT = "[?name_idx.Get_griffon_army_female_portrait]"
			}
		}
	}
	else = {
		set_temp_variable = {
			name_idx = 56
		}
		get_random_name_idx = yes
		set_temp_variable = {
			surname_idx = 30
		}
		get_random_surname_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetHerzlanderMaleName]"
			SURNAME = "[?surname_idx.GetHerzlanderSurname]"
		}
		if = {
			limit = {
				is_navy_leader = yes
			}
			set_temp_variable = {
				name_idx = 6
			}
			get_random_name_idx = yes
			meta_effect = {
				text = {
					set_leader_portrait = "[PORTRAIT]"
				}
				PORTRAIT = "[?name_idx.Get_griffon_navy_male_portrait]"
			}
		}
		else = {
			set_temp_variable = {
				name_idx = 12
			}
			get_random_name_idx = yes
			meta_effect = {
				text = {
					set_leader_portrait = "[PORTRAIT]"
				}
				PORTRAIT = "[?name_idx.Get_griffon_army_male_portrait]"
			}
		}
	}
	add_unit_leader_trait = griffon_race_trait
}

set_unit_leader_to_generic_pony = {
	if = {
		limit = {
			is_female = yes
		}
		set_temp_variable = {
			name_idx = 11
		}
		get_random_name_idx = yes
		set_temp_variable = {
			surname_idx = 20
		}
		get_random_surname_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetPonyFemaleName]"
			SURNAME = "[?surname_idx.GetPonySurname]"
		}
		if = {
			limit = {
				is_navy_leader = yes
			}
			set_temp_variable = {
				name_idx = 6
			}
			get_random_name_idx = yes
			meta_effect = {
				text = {
					set_leader_portrait = "[PORTRAIT]"
				}
				PORTRAIT = "[?name_idx.Get_pony_navy_female_portrait]"
			}
		}
		else = {
			set_temp_variable = {
				name_idx = 9
			}
			get_random_name_idx = yes
			meta_effect = {
				text = {
					set_leader_portrait = "[PORTRAIT]"
				}
				PORTRAIT = "[?name_idx.Get_pony_army_female_portrait]"
			}
		}
	}
	else = {
		set_temp_variable = {
			name_idx = 16
		}
		get_random_name_idx = yes
		set_temp_variable = {
			surname_idx = 20
		}
		get_random_surname_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetPonyMaleName]"
			SURNAME = "[?surname_idx.GetPonySurname]"
		}
		if = {
			limit = {
				is_navy_leader = yes
			}
			set_temp_variable = {
				name_idx = 2
			}
			get_random_name_idx = yes
			meta_effect = {
				text = {
					set_leader_portrait = "[PORTRAIT]"
				}
				PORTRAIT = "[?name_idx.Get_pony_navy_male_portrait]"
			}
		}
		else = {
			set_temp_variable = {
				name_idx = 4
			}
			get_random_name_idx = yes
			meta_effect = {
				text = {
					set_leader_portrait = "[PORTRAIT]"
				}
				PORTRAIT = "[?name_idx.Get_pony_army_male_portrait]"
			}
		}
	}
	add_unit_leader_trait = pony_race_trait
}

set_unit_leader_to_diamond_dog = {
	if = {
		limit = {
			is_female = yes
		}
		set_temp_variable = {
			name_idx = 8
		}
		get_random_name_idx = yes
		set_temp_variable = {
			surname_idx = 24
		}
		get_random_surname_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetDiamondDogFemaleName]"
			SURNAME = "[?surname_idx.GetDiamondDogSurname]"
		}
		set_leader_portrait = "GFX_portrait_dog_generic_8"
	}
	else = {
		set_temp_variable = {
			name_idx = 39
		}
		get_random_name_idx = yes
		set_temp_variable = {
			surname_idx = 24
		}
		get_random_surname_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetDiamondDogMaleName]"
			SURNAME = "[?surname_idx.GetDiamondDogSurname]"
		}
		if = {
			limit = {
				is_navy_leader = yes
			}
			set_temp_variable = {
				name_idx = 6
			}
			get_random_name_idx = yes
			meta_effect = {
				text = {
					set_leader_portrait = "[PORTRAIT]"
				}
				PORTRAIT = "[?name_idx.Get_BRZ_army_male_portrait]"
			}
		}
		else = {
			set_temp_variable = {
				name_idx = 6
			}
			get_random_name_idx = yes
			meta_effect = {
				text = {
					set_leader_portrait = "[PORTRAIT]"
				}
				PORTRAIT = "[?name_idx.Get_BRZ_army_male_portrait]"
			}
		}
	}
	add_unit_leader_trait = diamond_dog_race_trait
}

# expects name_idx temp var
get_random_name_idx = {
	subtract_from_temp_variable = {
		name_idx = 1
	}
	multiply_temp_variable = {
		name_idx = random
	}
	round_temp_variable = name_idx
	add_to_temp_variable = {
		name_idx = 1
	}
}

# expects surname_idx temp var
get_random_surname_idx = {
	subtract_from_temp_variable = {
		surname_idx = 1
	}
	multiply_temp_variable = {
		surname_idx = random
	}
	round_temp_variable = surname_idx
	add_to_temp_variable = {
		surname_idx = 1
	}
}

give_FEA_name = {
	set_temp_variable = {
		surname_idx = 30
	}
	get_random_surname_idx = yes
	if = {
		limit = { is_female = yes }
		set_temp_variable = {
			name_idx = 11
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetFEAFemaleName]"
			SURNAME = "[?surname_idx.GetHerzlanderSurname]"
		}
	}
	else = {
		set_temp_variable = {
			name_idx = 37
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetFEAMaleName]"
			SURNAME = "[?surname_idx.GetHerzlanderSurname]"
		}
	}
}

give_DAN_name = {
	set_temp_variable = {
		surname_idx = 30
	}
	get_random_surname_idx = yes
	if = {
		limit = { is_female = yes }
		set_temp_variable = {
			name_idx = 13
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetDANFemaleName]"
			SURNAME = "[?surname_idx.GetHerzlanderSurname]"
		}
	}
	else = {
		set_temp_variable = {
			name_idx = 41
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetDANMaleName]"
			SURNAME = "[?surname_idx.GetHerzlanderSurname]"
		}
	}
}

give_TRD_name = {
	set_temp_variable = {
		surname_idx = 129
	}
	get_random_surname_idx = yes
	if = {
		limit = { is_female = yes }
		set_temp_variable = {
			name_idx = 22
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetTRDFemaleName]"
			SURNAME = "[?surname_idx.GetTRDSurname]"
		}
	}
	else = {
		set_temp_variable = {
			name_idx = 73
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetTRDMaleName]"
			SURNAME = "[?surname_idx.GetTRDSurname]"
		}
	}
}

give_herzlander_name = {
	set_temp_variable = {
		surname_idx = 30
	}
	get_random_surname_idx = yes
	if = {
		limit = { is_female = yes }
		set_temp_variable = {
			name_idx = 47
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetHerzlanderFemaleName]"
			SURNAME = "[?surname_idx.GetHerzlanderSurname]"
		}
	}
	else = {
		set_temp_variable = {
			name_idx = 56
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetHerzlanderMaleName]"
			SURNAME = "[?surname_idx.GetHerzlanderSurname]"
		}
	}
}

give_WNG_name = {
	set_temp_variable = {
		surname_idx = 43
	}
	get_random_surname_idx = yes
	if = {
		limit = { is_female = yes }
		set_temp_variable = {
			name_idx = 12
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetSouthernFemaleName]"
			SURNAME = "[?surname_idx.GetSouthernSurname]"
		}
	}
	else = {
		set_temp_variable = {
			name_idx = 51
		}
		get_random_name_idx = yes
		meta_effect = {
			text = {
				set_leader_name = "[NAME] [SURNAME]"
			}
			NAME = "[?name_idx.GetSouthernMaleName]"
			SURNAME = "[?surname_idx.GetSouthernSurname]"
		}
	}
}
